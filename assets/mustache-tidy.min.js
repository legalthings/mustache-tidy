var mustacheTidy=function(e){function n(o){if(t[o])return t[o].exports;var l=t[o]={i:o,l:!1,exports:{}};return e[o].call(l.exports,l,l.exports,n),l.l=!0,l.exports}var t={};return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=8)}([function(e,n,t){var o="undefined"!=typeof window;if(o)e.exports={jsdom:null,Node:Node};else{var l=t(!function(){var e=new Error('Cannot find module "jsdom"');throw e.code="MODULE_NOT_FOUND",e}());l.defaultDocumentFeatures={FetchExternalResources:!1,ProcessExternalResources:!1};var d=t(!function(){var e=new Error('Cannot find module "jsdom/lib/jsdom/living/generated/Node.js"');throw e.code="MODULE_NOT_FOUND",e}());e.exports={jsdom:l.jsdom,Node:d.expose.Window.Node}}},function(e,n,t){function o(e){u=e}function l(){if(u.debug){for(var e=Array.prototype.slice.apply(arguments),n=0;n<e.length;n++)null!==e[n]&&"object"==typeof e[n]&&"undefined"!=typeof e[n].nodeType&&e[n].nodeType===s.TEXT_NODE&&(e[n]='"'+e[n].nodeValue+'"');console.log.apply(console,e)}}function d(e){function n(e,o){if(o||(o=0),e.nodeType===s.TEXT_NODE)return t(o)+e.nodeValue+"\n";if(e.nodeType!==s.ELEMENT_NODE)return"";var l=t(o),d=e.nodeName.toLowerCase(),i=l+"<"+d+">\n",r=e.childNodes;o++;for(var a=0;a<r.length;a++)i+=n(r[a],o);return i+l+"</"+d+">\n"}function t(e){return e?r(" ",4*e):""}if(u.debug){var o=n(e);l("result html: "),l(o)}}function i(e,n){function t(e){var n=e.node,t=n.nodeValue,o=e.index,d=e.tag.length;n.nodeValue=t.substring(0,o+1)+"#"+t.substr(o+2,d-4)+"#"+t.substring(o-1+d),l("replace ->",t,"<- with ->",n.nodeValue)}if(u.debug){var o=null;for(var d in e){o=e[d];for(var i=0;i<o.length;i++)t(o[i])}for(var i=0;i<n.length;i++)o=n[i],t(o.closed),o.opened&&t(o.opened)}}function r(e,n){return Array(1*n+1).join(e)}var a=t(0),s=a.Node;e.exports={init:o,log:l,logResult:d,hideInvalidTags:i};var u={}},function(e,n,t){function o(e){p.init(e),f=e.doc}function l(e,n){return Array(1*n+1).join(e)}function d(e,n){e.index=0,e.node=i(e.tag),"undefined"!=typeof n&&(e.level=n)}function i(e){return f.createTextNode(e)}function r(e){return 0===e.index||!e.node.nodeValue.substring(0,e.index).trim().length}function a(e){var n=e.node.nodeValue,t=e.index+e.tag.length;return n.length===t||!n.substring(t).trim().length}function s(e){return e&&e.nodeType!==c.COMMENT_NODE}function u(e){return!!s(e)&&(!(e.nodeType===c.TEXT_NODE&&!e.nodeValue.trim().length)||!!e.nextSibling&&u(e.nextSibling))}var g=t(0),p=t(1),f=null,c=(p.log,g.Node);e.exports={init:o,repeatString:l,updateTextNodeData:d,createTextNode:i,startsWithTag:r,endsWithTag:a,isDataElement:s,isFullDataElement:u}},function(e,n,t){function o(e){s.init(e),a.init(e),h=e.fixTableTags,m=h.saveTmpTag,T=h.isTmpTag,x=h.unmarkTmpTagAfterMove}function l(e,n){var t=e.node.parentElement.compareDocumentPosition(n.node.parentElement);t&c.DOCUMENT_POSITION_CONTAINS?d(e,n,!0):t&c.DOCUMENT_POSITION_CONTAINED_BY?i(e,n,!0):e.level>=n.level?(v("-------------- extend tag both ways starting from closed"),i(e,n,!0),d(e,n)):(v("-------------- extend tag both ways starting from opened"),d(e,n,!0),i(e,n))}function d(e,n,t){v("-------------- extend tag forward");var o="fromOpened",l=e.level,d=e.node,i=null;for(!e.node.nextSibling&&f(e)||(i=g(n.tag),e.node.parentElement.appendChild(i)),x(o);;)if(l--,d=d.parentElement,d.nextSibling){if(T(e)&&m(o,e.node,i),u(e,l),d.parentElement.insertBefore(e.node,d.nextSibling),t?d.parentElement.contains(n.node):l<=n.level)break;i=g(n.tag),d.parentElement.appendChild(i)}T(e)&&m(o,e.node,null)}function i(e,n,t){v("-------------- extend tag back");var o="fromClosed",l=n.level,d=n.node.parentElement,i=null;for(!n.node.previousSibling&&p(n)||(i=g(e.tag),d.insertBefore(i,d.firstChild)),x(o),d=n.node;;)if(l--,d=d.parentElement,d.previousSibling){if(T(n)&&m(o,i,n.node),u(n,l),d.parentElement.insertBefore(n.node,d),t?d.parentElement.contains(e.node):l<=e.level)break;i=g(e.tag),d.parentElement.insertBefore(i,d.parentElement.firstChild)}T(n)&&m(o,null,n.node)}var r=t(0),a=t(2),s=t(1),u=a.updateTextNodeData,g=a.createTextNode,p=a.startsWithTag,f=a.endsWithTag,c=r.Node,v=s.log,h=null,m=null,T=null,x=null;e.exports={init:o,extendSeparatedTagParts:l,extendTagForward:d,extendTagBack:i}},function(e,n,t){function o(e){p.init(e),g.init(e),c={fromOpened:[],fromClosed:[]}}function l(){if(c.fromOpened.length||c.fromClosed.length){for(var e=c.fromOpened,n=c.fromClosed,t=0;t<e.length-1;t++)d(e[t].opened,e[t].closed);if(e.length){var o=e[e.length-1];if(o.closed)d(o.opened,o.closed);else{var l=n.pop();d(o.opened,l.closed)}}for(var t=0;t<n.length;t++)d(n[t].opened,n[t].closed);e.length=0,n.length=0}}function d(e,n){function t(o){if(o.nodeType===f.ELEMENT_NODE&&o.firstChild)if(h[o.nodeName])o.insertBefore(e.cloneNode(),o.firstChild),o.appendChild(n.cloneNode());else for(var l=0;l<o.childNodes.length;l++)t(o.childNodes[l])}for(var o=e,l=0;;){if(o=o.nextSibling,o===n)break;t(o),4===++l&&func()}e.parentElement.removeChild(e),n.parentElement.removeChild(n)}function i(e){return!!v[e.node.parentElement.nodeName]}function r(e,n){i(e)&&a("fromOpened",e.node,null),i(n)&&a("fromClosed",null,n.node)}function a(e,n,t){c[e].push({opened:n,closed:t})}function s(e){c[e].length&&c[e].pop()}var u=t(0),g=t(2),p=t(1),f=u.Node,c=(p.log,null),v={TABLE:1,THEAD:1,TBODY:1,TR:1},h={TD:1,TH:1};e.exports={init:o,handleTmpTags:l,isTmpTag:i,saveTmpTags:r,saveTmpTag:a,unmarkTmpTagAfterMove:s}},function(e,n,t){function o(e){v.init(e),c.init(e),O=[],C=e.fixTableTags}function l(e,n){N("closing tag is in ancestor node of opening tag"),m(e)&&!x(e.node.previousSibling)?(N("--------------- move opened tag up outside"),s(e,n.level)):T(e)&&!x(e.node.nextSibling)&&(N("--------------- move opened tag up inside"),u(e,n.level)),e.level!==n.level&&m(n)&&n.node.previousSibling.contains(e.node)&&(N("--------------- move closed tag down inside"),a(n,e.level,e.node)),C.saveTmpTags(e,n)}function d(e,n){N("closed tag is contained inside open"),T(n)&&!E(n.node.nextSibling)?(N("--------------- move closed tag up outside"),u(n,e.level)):m(n)&&!x(n.node.previousSibling)&&(N("--------------- move closed tag up inside"),s(n,e.level)),e.level!==n.level&&T(e)&&e.node.nextSibling.contains(n.node)&&(N("--------------- move opened tag down inside"),r(e,n.level,n.node)),C.saveTmpTags(e,n)}function i(e,n){N("opening and closing tags are not in ancestor nodes of each other"),m(e)&&!x(e.node.previousSibling)?(N("--------------- move opened tag up outside"),s(e,n.level,n.node)):T(e)&&!x(e.node.nextSibling)&&(N("--------------- move opened tag up inside"),u(e,n.level,n.node)),T(n)&&!E(n.node.nextSibling)?(N("--------------- move closed tag up outside"),u(n,e.level,e.node)):m(n)&&!x(n.node.previousSibling)&&(N("--------------- move closed tag up inside"),s(n,e.level,e.node)),C.saveTmpTags(e,n)}function r(e,n,t){for(var o=e.node.nextSibling;e.level<n&&o.contains(t);)e.level++,o=o.firstChild;e.node.nodeValue.length!==e.tag.length&&(p(e),h(e));var l=o.parentElement;l.insertBefore(e.node,l.firstChild)}function a(e,n,t){for(var o=e.node.previousSibling;e.level<n&&o.contains(t);)e.level++,o=o.lastChild;e.node.nodeValue.length!==e.tag.length&&(p(e),h(e)),o.parentElement.appendChild(e.node)}function s(e,n,t){var o=e.node;do e.level--,o=o.parentElement;while((e.level>n||t&&!o.parentElement.contains(t))&&!x(o.previousSibling));e.node.nodeValue.length!==e.tag.length&&(p(e),h(e)),o.parentElement.insertBefore(e.node,o)}function u(e,n,t){var o=e.node;do e.level--,o=o.parentElement;while((e.level>n||t&&!o.parentElement.contains(t))&&!E(o.nextSibling));e.node.nodeValue.length!==e.tag.length&&(p(e),h(e));var l=o.parentElement,d=o.nextSibling;d?l.insertBefore(e.node,d):l.appendChild(e.node)}function g(){for(var e=null;e=O.pop();)e.node.nodeValue=e.node.nodeValue.replace(e.placeholder,"")}function p(e){var n=e.node.nodeValue,t=e.tag.length,o="{#"+b("_",t-4)+"#}";e.node.nodeValue=n.substring(0,e.index)+o+n.substring(e.index+t),O.push({node:e.node,placeholder:o})}var f=t(0),c=t(2),v=t(1),h=c.updateTextNodeData,m=c.startsWithTag,T=c.endsWithTag,x=c.isDataElement,E=c.isFullDataElement,b=c.repeatString,N=(f.Node,v.log),O=[],C=null;e.exports={init:o,handleCaseClosedIsAncestor:l,handleCaseOpenedIsAncestor:d,handleCaseSeparateTrees:i,removePlaceholders:g}},function(e,n,t){function o(e){r.init(e),s=e.root}function l(e,n,t){var o=e.node,i=o.parentElement,r="both"===t?e.tag+n.tag:e.tag,a=!i||i===s||!i.parentElement||i.childNodes.length>1||!u[i.nodeName];if(!a){var g=r===o.nodeValue.trim();if(!g&&"both"===t){var p=o.nodeValue,f=p.substring(0,e.index)+p.substring(e.index+e.tag.length,n.index)+p.substring(n.index+n.tag.length);g=!f.trim().length}if(g&&(i.parentElement.replaceChild(o,i),e.level--,!o.parentElement.children.length)){var c=d(e,n,t);t=c?"both":t,l(e,n,t)}}}function d(e,n,t){for(var o=e.node,l=e.node,d="both"===t,i=[];;){if(o=o.previousSibling,!o||o.nodeType!==a.TEXT_NODE)break;if(o===n.node)d=!0,e.index+=o.nodeValue.length,e.node.nodeValue=o.nodeValue+e.node.nodeValue,n.node=e.node;else if(o.nodeValue.trim().length)break;i.push(o)}for(;;){if(l=l.nextSibling,!l||l.nodeType!==a.TEXT_NODE)break;if(l===n.node)d=!0,n.index+=e.node.nodeValue.length,e.node.nodeValue=e.node.nodeValue+l.nodeValue,n.node=e.node;else if(l.nodeValue.trim().length)break;i.push(l)}for(var r=e.node.parentElement,s=0;s<i.length;s++)r.removeChild(i[s]);return d}var i=t(0),r=t(1),a=i.Node,s=(r.log,null),u={P:1,DIV:1,SPAN:1,I:1,EM:1,STRONG:1,LI:1};e.exports={init:o,run:l}},function(e,n,t){function o(e){return t(l(e))}function l(e){var n=d[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var d={"./debug":1,"./debug.js":1,"./dom-config":0,"./dom-config.js":0,"./extend-tags":3,"./extend-tags.js":3,"./fix-table-tags":4,"./fix-table-tags.js":4,"./move-tags":5,"./move-tags.js":5,"./replace-empty-node":6,"./replace-empty-node.js":6,"./utils":2,"./utils.js":2};o.keys=function(){return Object.keys(d)},o.resolve=l,e.exports=o,o.id=7},function(e,n,t){function o(e){return t(7)("./"+e)}function l(e,n){function t(){if(p)if(O=document,"string"==typeof e)V=!0,C=document.createElement("div"),C.innerHTML=e;else{if(!(e instanceof c))throw"You should pass either a string with text/html to mustache-tidy, or DOM node, containing target html";C=e}else O=f(e).defaultView.document,C=O.documentElement,V=!0;n||(n={}),n.doc=O,n.root=C,n.fixTableTags=g,r.init(n),i.init(n),a.init(n),s.init(n),u.init(n),g.init(n)}function o(){var e=0;l(C,e)}function l(e,n){if(e.nodeType===c.TEXT_NODE)return d(e,n);if(e.nodeType===c.ELEMENT_NODE){n++;for(var t=Array.prototype.slice.call(e.childNodes),o=0;o<t.length;o++)l(t[o],n)}}function d(e,n){if(e.nodeValue=e.nodeValue.trim(),!e.nodeValue.length&&e.parentElement)return void e.parentElement.removeChild(e);var t=e.nodeValue;for(T.tag.lastIndex=0;;){t.length!==e.nodeValue.length&&(T.tag.lastIndex-=t.length-e.nodeValue.length),t=e.nodeValue;var o=T.tag.exec(e.nodeValue);if(!o||!o[2].length&&"/"!==o[1])break;o[2]=o[2].replace(T.tagName,function(e){var n=e.substring(0,1);return'"'!==n&&"'"!==n?e.replace(T.spaces,""):e}),"/"!==o[1]?x(e,o,n):E(e,o,n)}}function x(e,n,t){var o=n[2];D.push(o);var l={node:e,tag:n[0],index:n.index,level:t,openedKey:D.length-1};"undefined"==typeof y[o]&&(y[o]=[]),y[o].push(l),m("opened: ",o)}function E(e,n,t){var o=n[2],l={node:e,tag:n[0],index:n.index,level:t};if(!o.length&&D.length&&(o=D[D.length-1]),"undefined"==typeof y[o]||!o.length)return void S.push({closed:l});var d=y[o].pop();if(y[o].length||delete y[o],o!==D[D.length-1])m('remove wrong closed "'+o+'" from stack: ',D[d.openedKey]),D[d.openedKey]=null,S.push({opened:d,closed:l});else{do m("pop last element from opened stack: ",D[D.length-1]),D.pop();while(null===D[D.length-1]);m("closed: ",o),b({opened:d,closed:l})}}function b(e){m("======= start tidy: ",e.opened.tag,e.closed.tag);var n=e.opened,t=e.closed;if(n.node!==t.node&&(a.run(n,t,"opened"),a.run(t,n,"closed")),n.node===t.node&&a.run(n,t,"both"),n.node.parentElement!==t.node.parentElement){var o=n.node.parentElement.compareDocumentPosition(t.node.parentElement);o&c.DOCUMENT_POSITION_CONTAINS?(s.handleCaseClosedIsAncestor(n,t),n.level!==t.level&&u.extendTagForward(n,t)):o&c.DOCUMENT_POSITION_CONTAINED_BY?(s.handleCaseOpenedIsAncestor(n,t),n.level!==t.level&&u.extendTagBack(n,t)):(s.handleCaseSeparateTrees(n,t),n.node.parentElement!==t.node.parentElement&&u.extendSeparatedTagParts(n,t))}g.handleTmpTags(),s.removePlaceholders(),N(n,t)}function N(e,n){var t=null;if(m("removing nodes: ",e,n,e.node,n.node),e.node===n.node){t=e.node.nodeValue;var o=t.substring(e.index+e.tag.length,n.index);return void(o.trim().length||(e.node.nodeValue=t.substring(0,e.index)+t.substring(n.index+n.tag.length),e.node=n.node=null))}var l=e.node.parentElement,d=l&&e.node.nextSibling===n.node&&h(e)&&v(n);d&&(v(e)?l.removeChild(e.node):e.node.nodeValue=e.node.nodeValue.substring(0,e.index),h(n)?l.removeChild(n.node):n.node.nodeValue=n.node.nodeValue.substring(n.index+n.tag.length),e.node=n.node=null)}for(var O=null,C=null,V=!1,y={},S=[],D=[],w=0;w<T.length;w++)T[w].lastIndex=0;return t(),o(C),r.hideInvalidTags(y,S),r.logResult(C),V?p?C.innerHTML:C.lastChild.innerHTML:null}var d=o("dom-config"),i=o("utils"),r=o("debug"),a=o("replace-empty-node"),s=o("move-tags"),u=o("extend-tags"),g=o("fix-table-tags"),p="undefined"!=typeof window,f=d.jsdom,c=d.Node,v=(i.repeatString,i.startsWithTag),h=i.endsWithTag,m=r.log,T={spaces:new RegExp("\\s+","g"),tagName:new RegExp("(?:[^\"']+|\"[^\"]+\"|'[^']+')","g"),tag:new RegExp("\\{\\{\\s*([#^/])([^}]*)\\}\\}","g")};e.exports=l}]);